import{i as ne,r as f,j as P,s as C,h as se,R as e}from"./index-DgwETXXl.js";import{B as b}from"./button-JwqKODJ6.js";import{c as le,a as ce,u as F}from"./index-B96c5szH.js";import{P as q}from"./index-CHRW_5Qr.js";import{a as _}from"./utils-CHUdG8Hq.js";import{C as k,b as z,c as $,a as U}from"./card-Bd3wj2iC.js";import{u as ie}from"./useTeachers-BUIP1BjG.js";import{u as B}from"./useMutation-CWkqDcyF.js";import{u as H,q as x}from"./queryKeys-DRwUXBOd.js";import{m as h}from"./proxy-BwaxQ4ZJ.js";import{L as T,A as oe,a as me}from"./alert-CYx-5lkx.js";import{C as de}from"./check-B3DRr4vU.js";import{c as w}from"./createLucideIcon-BsWjkkVR.js";import{I as v,A as ue}from"./index-CgFL_Lmt.js";import{L as E}from"./label-CdvlP7dS.js";import{U as Q}from"./user-CTxzqBVw.js";import{B as fe}from"./building-2-RcLbp3B3.js";import{X as G}from"./x-UGlBcBjw.js";import{P as V}from"./phone-DRVYeXDB.js";import{M as K}from"./mail-C-B26gZ_.js";import{C as pe}from"./circle-alert-lgjGWSdq.js";import{C as ge}from"./circle-check-big-B1M-QEmw.js";import{L as S}from"./lock-Dc69-zd5.js";import"./index-Ciz9C784.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ye=w("briefcase",he);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ve=w("camera",Ee);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],I=w("eye-off",Ne);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],L=w("eye",be);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],J=w("pen",we);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],R=w("save",xe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ce=w("shield",Se);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Re=w("upload",Pe);var M={exports:{}},j={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W;function _e(){if(W)return j;W=1;var t=ne();function s(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var a=typeof Object.is=="function"?Object.is:s,c=t.useState,i=t.useEffect,r=t.useLayoutEffect,n=t.useDebugValue;function l(p,g){var o=g(),y=c({inst:{value:o,getSnapshot:g}}),N=y[0].inst,A=y[1];return r(function(){N.value=o,N.getSnapshot=g,m(N)&&A({inst:N})},[p,o,g]),i(function(){return m(N)&&A({inst:N}),p(function(){m(N)&&A({inst:N})})},[p]),n(o),o}function m(p){var g=p.getSnapshot;p=p.value;try{var o=g();return!a(p,o)}catch{return!0}}function d(p,g){return g()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return j.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,j}var Y;function ke(){return Y||(Y=1,M.exports=_e()),M.exports}var Ae=ke();function Ie(){return Ae.useSyncExternalStore(Le,()=>!0,()=>!1)}function Le(){return()=>{}}var D="Avatar",[Me,Ct]=le(D),[je,X]=Me(D),O=f.forwardRef((t,s)=>{const{__scopeAvatar:a,...c}=t,[i,r]=f.useState("idle");return P.jsx(je,{scope:a,imageLoadingStatus:i,onImageLoadingStatusChange:r,children:P.jsx(q.span,{...c,ref:s})})});O.displayName=D;var ee="AvatarImage",te=f.forwardRef((t,s)=>{const{__scopeAvatar:a,src:c,onLoadingStatusChange:i=()=>{},...r}=t,n=X(ee,a),l=Fe(c,r),m=ce(d=>{i(d),n.onImageLoadingStatusChange(d)});return F(()=>{l!=="idle"&&m(l)},[l,m]),l==="loaded"?P.jsx(q.img,{...r,ref:s,src:c}):null});te.displayName=ee;var ae="AvatarFallback",re=f.forwardRef((t,s)=>{const{__scopeAvatar:a,delayMs:c,...i}=t,r=X(ae,a),[n,l]=f.useState(c===void 0);return f.useEffect(()=>{if(c!==void 0){const m=window.setTimeout(()=>l(!0),c);return()=>window.clearTimeout(m)}},[c]),n&&r.imageLoadingStatus!=="loaded"?P.jsx(q.span,{...i,ref:s}):null});re.displayName=ae;function Z(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Fe(t,{referrerPolicy:s,crossOrigin:a}){const c=Ie(),i=f.useRef(null),r=c?(i.current||(i.current=new window.Image),i.current):null,[n,l]=f.useState(()=>Z(r,t));return F(()=>{l(Z(r,t))},[r,t]),F(()=>{const m=p=>()=>{l(p)};if(!r)return;const d=m("loaded"),u=m("error");return r.addEventListener("load",d),r.addEventListener("error",u),s&&(r.referrerPolicy=s),typeof a=="string"&&(r.crossOrigin=a),()=>{r.removeEventListener("load",d),r.removeEventListener("error",u)}},[r,a,s]),n}var Te=O,qe=te,ze=re;function $e({className:t,...s}){return f.createElement(Te,{"data-slot":"avatar",className:_("relative flex size-8 shrink-0 overflow-hidden rounded-full",t),...s})}function Ue({className:t,...s}){return f.createElement(qe,{"data-slot":"avatar-image",className:_("aspect-square size-full",t),...s})}function De({className:t,...s}){return f.createElement(ze,{"data-slot":"avatar-fallback",className:_("bg-muted flex size-full items-center justify-center rounded-full",t),...s})}const Be=Object.freeze([]),He=Object.freeze([]);async function Qe(t){const{data:s,error:a}=await C.from("teacher_profile").select("*").eq("email",t).single();if(a)throw new Error(a.message||"Failed to fetch teacher profile");return s??[]}async function Ve(t){const{data:s,error:a}=await C.from("teacher_subjects").select("*").eq("teacher",t).single();if(a)throw new Error(a.message||"Failed to fetch teacher subjects");return s??[]}function Ke(t={}){const{email:s,name:a,teachersProfileQueryOptions:c={},teachersSubjectsQueryOptions:i={}}=t,r=H({queryKey:x.teachers.profile(s),queryFn:()=>Qe(s),staleTime:6e4,enabled:!!s,...c}),n=H({queryKey:x.teacherSubjects.byTeacher(a),queryFn:()=>Ve(a),staleTime:10*6e4,enabled:!!a,...i}),l=!!(r.isLoading||n.isLoading),m=!!(n.isError||r.isError),d=n.error??r.error??null,u=async()=>{const[p,g]=await Promise.all([r.refetch(),n.refetch()]);return{teachersSubjects:g.data??[],teachersProfile:p.data??[]}};return{teachersSubjects:n.data??Be,teachersProfile:r.data??He,isLoading:l,isError:m,error:d,refetch:u,teachersSubjectsQuery:n,teachersProfileQuery:r}}async function We(t,s){const a=s.name.split(".").pop(),c=`${Date.now()}.${a}`,{error:i,data:r}=await C.storage.from("avatars").upload(`teacher/${c}`,profilePicPath);if(i){console.error("Upload failed:",i.message);return}const{data:n,error:l}=await C.from("profiles").update({avatar_url:r.fullPath}).eq("id",t);if(l){console.error("Profile update failed:",l.message);return}return n}async function Ye({id:t,updates:s}){const{data:a,error:c}=await C.from("teacher_profile").update(s).eq("id",t).select("*").single();if(c)throw new Error(c.message||"Failed to update teacher");return a}function Ze({createOptions:t,updateOptions:s}={}){const a=se(),c=B({mutationFn:We,onSuccess:async(r,n,l)=>{a.setQueryData(x.teachers.profile,m=>{const d=Array.isArray(m)?m:[];return[r,...d]}),await a.invalidateQueries({queryKey:x.teachers.profile}),t?.onSuccess&&t.onSuccess(r,n,l)},onError:(r,n,l)=>{t?.onError&&t.onError(r,n,l)},...t}),i=B({mutationFn:Ye,onSuccess:async(r,n,l)=>{a.setQueryData(x.teachers.all,m=>Array.isArray(m)?m.map(d=>d?.id===r?.id?{...d,...r}:d):m),await a.invalidateQueries({queryKey:x.teachers.all}),s?.onSuccess&&s.onSuccess(r,n,l)},onError:(r,n,l)=>{s?.onError&&s.onError(r,n,l)},...s});return{uploadProfilePic:c.mutate,uploadProfilePicAsync:c.mutateAsync,updateTeacher:i.mutate,updateTeacherAsync:i.mutateAsync,uploadProfilePicStatus:c,updateStatus:i}}function Ge(t){const{teachers:s}=ie(),{uploadProfilePicAsync:a,uploadProfilePicStatus:c}=Ze(),i=f.useRef(null),r=async l=>{const m=l.target.files?.[0];if(m){if(!m.type.startsWith("image/")){alert("Please select an image file");return}if(m.size>10*1024*1024){alert("File size must be less than 5MB");return}try{const d=l.target.files?.[0];await a(s.id,d)}catch(d){console.error("Error uploading profile picture:",d),alert("Failed to upload profile picture. Please try again.")}}},n=()=>t?.full_name?t?.full_name.split(" ").map(l=>l[0]).join("").toUpperCase().slice(0,2):"T";return React.createElement(h.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5}},React.createElement(k,{className:"p-8 bg-gradient-to-br from-indigo-50 to-white border-none shadow-lg"},React.createElement("div",{className:"flex flex-col md:flex-row items-center gap-6"},React.createElement(h.div,{className:"relative group",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300}},React.createElement($e,{className:"w-32 h-32 border-4 border-white shadow-xl"},React.createElement(Ue,{src:t?.profile_picture_url,alt:t?.full_name}),React.createElement(De,{className:"text-3xl font-semibold bg-gradient-to-br from-indigo-500 to-purple-600 text-white"},n())),React.createElement(h.button,{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>i.current?.click(),disabled:c.isPending,whileTap:{scale:.95}},c.isPending?React.createElement(T,{className:"w-8 h-8 text-white animate-spin"}):c.isPending?React.createElement(de,{className:"w-8 h-8 text-green-400"}):React.createElement(ve,{className:"w-8 h-8 text-white"})),React.createElement("input",{ref:i,type:"file",accept:"image/*",onChange:r,className:"hidden"})),React.createElement("div",{className:"flex-1 text-center md:text-left"},React.createElement(h.h1,{className:"text-3xl font-bold text-card-foreground mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2}},t?.full_name),React.createElement(h.p,{className:"text-lg text-indigo-600 font-medium mb-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3}},t?.position||"Teacher"),React.createElement(h.p,{className:" text-muted-foreground",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4}},t?.email)),React.createElement(b,{variant:"outline",size:"sm",onClick:()=>i.current?.click(),disabled:c.isPending,className:"gap-2"},c.isPending?React.createElement(React.Fragment,null,React.createElement(T,{className:"w-4 h-4 animate-spin"}),"Uploading..."):React.createElement(React.Fragment,null,React.createElement(Re,{className:"w-4 h-4"}),"Change Photo")))))}function Je({className:t,...s}){return f.createElement("textarea",{"data-slot":"textarea",className:_("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}function Xe({user:t,onUpdate:s}){const[a,c]=f.useState(!1),[i,r]=f.useState(!1),[n,l]=f.useState({full_name:t?.full_name||"",position:t?.position||"",department:t?.department||"",bio:t?.bio||""}),m=async()=>{r(!0);try{await User.updateMyUserData({position:n.position,department:n.department,bio:n.bio}),s(),c(!1)}catch(u){console.error("Error updating personal info:",u),alert("Failed to update information. Please try again.")}r(!1)},d=()=>{l({full_name:t?.full_name||"",position:t?.position||"",department:t?.department||"",bio:t?.bio||""}),c(!1)};return e.createElement(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1}},e.createElement(k,{className:"border-none shadow-md hover:shadow-lg transition-shadow"},e.createElement(z,{className:"border-b bg-gradient-to-r from-gray-50 to-white"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement($,{className:"flex items-center gap-2 text-xl"},e.createElement(Q,{className:"w-5 h-5 text-indigo-600"}),"Personal Information"),!a&&e.createElement(b,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"gap-2"},e.createElement(J,{className:"w-4 h-4"}),"Edit"))),e.createElement(U,{className:"p-6"},e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"grid md:grid-cols-2 gap-6"},e.createElement("div",{className:"space-y-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"Full Name"),e.createElement(v,{value:n.full_name,disabled:!0,className:"bg-gray-50",icon:e.createElement(Q,{className:"w-4 h-4 text-gray-400"})}),e.createElement("p",{className:"text-xs text-gray-500"},"Contact support to change your name")),e.createElement("div",{className:"space-y-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"Position / Title"),e.createElement("div",{className:"relative"},e.createElement(ye,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.createElement(v,{value:n.position,onChange:u=>l({...n,position:u.target.value}),disabled:!a,className:a?"pl-10":"bg-gray-50 pl-10",placeholder:"e.g., Senior Mathematics Teacher"}))),e.createElement("div",{className:"space-y-2 md:col-span-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"Department"),e.createElement("div",{className:"relative"},e.createElement(fe,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.createElement(v,{value:n.department,onChange:u=>l({...n,department:u.target.value}),disabled:!a,className:a?"pl-10":"bg-gray-50 pl-10",placeholder:"e.g., Mathematics & Science"}))),e.createElement("div",{className:"space-y-2 md:col-span-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"Bio"),e.createElement(Je,{value:n.bio,onChange:u=>l({...n,bio:u.target.value}),disabled:!a,className:a?"":"bg-gray-50",placeholder:"Tell us about yourself...",rows:4}))),a&&e.createElement(h.div,{className:"flex justify-end gap-3 pt-4 border-t",initial:{opacity:0,y:10},animate:{opacity:1,y:0}},e.createElement(b,{variant:"outline",onClick:d,disabled:i},e.createElement(G,{className:"w-4 h-4 mr-2"}),"Cancel"),e.createElement(b,{onClick:m,disabled:i,className:"bg-indigo-600 hover:bg-indigo-700"},i?e.createElement(e.Fragment,null,e.createElement(h.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}},e.createElement(R,{className:"w-4 h-4 mr-2"})),"Saving..."):e.createElement(e.Fragment,null,e.createElement(R,{className:"w-4 h-4 mr-2"}),"Save Changes")))))))}function Oe({user:t,onUpdate:s}){const[a,c]=f.useState(!1),[i,r]=f.useState(!1),[n,l]=f.useState({phone:t?.phone||"",secondary_email:t?.secondary_email||""}),m=async()=>{r(!0);try{await User.updateMyUserData({phone:n.phone,secondary_email:n.secondary_email}),s(),c(!1)}catch(u){console.error("Error updating contact info:",u),alert("Failed to update contact information. Please try again.")}r(!1)},d=()=>{l({phone:t?.phone||"",secondary_email:t?.secondary_email||""}),c(!1)};return e.createElement(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2}},e.createElement(k,{className:"border-none shadow-md hover:shadow-lg transition-shadow"},e.createElement(z,{className:"border-b bg-gradient-to-r from-gray-50 to-white"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement($,{className:"flex items-center gap-2 text-xl"},e.createElement(V,{className:"w-5 h-5 text-indigo-600"}),"Contact Information"),!a&&e.createElement(b,{variant:"outline",size:"sm",onClick:()=>c(!0),className:"gap-2"},e.createElement(J,{className:"w-4 h-4"}),"Edit"))),e.createElement(U,{className:"p-6"},e.createElement("div",{className:"space-y-6"},e.createElement("div",{className:"space-y-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"Primary Email"),e.createElement("div",{className:"relative"},e.createElement(K,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.createElement(v,{value:t?.email||"",disabled:!0,className:"bg-gray-50 pl-10"})),e.createElement("p",{className:"text-xs text-gray-500"},"Your primary email cannot be changed")),e.createElement("div",{className:"space-y-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"Phone Number"),e.createElement("div",{className:"relative"},e.createElement(V,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.createElement(v,{value:n.phone,onChange:u=>l({...n,phone:u.target.value}),disabled:!a,className:a?"pl-10":"bg-gray-50 pl-10",placeholder:"+1 (555) 123-4567",type:"tel"}))),e.createElement("div",{className:"space-y-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"Secondary Email"),e.createElement("div",{className:"relative"},e.createElement(K,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.createElement(v,{value:n.secondary_email,onChange:u=>l({...n,secondary_email:u.target.value}),disabled:!a,className:a?"pl-10":"bg-gray-50 pl-10",placeholder:"alternate@email.com",type:"email"}))),a&&e.createElement(h.div,{className:"flex justify-end gap-3 pt-4 border-t",initial:{opacity:0,y:10},animate:{opacity:1,y:0}},e.createElement(b,{variant:"outline",onClick:d,disabled:i},e.createElement(G,{className:"w-4 h-4 mr-2"}),"Cancel"),e.createElement(b,{onClick:m,disabled:i,className:"bg-indigo-600 hover:bg-indigo-700"},i?e.createElement(e.Fragment,null,e.createElement(h.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}},e.createElement(R,{className:"w-4 h-4 mr-2"})),"Saving..."):e.createElement(e.Fragment,null,e.createElement(R,{className:"w-4 h-4 mr-2"}),"Save Changes")))))))}function et(){const[t,s]=f.useState({current:!1,new:!1,confirm:!1}),[a,c]=f.useState({current:"",new:"",confirm:""}),[i,r]=f.useState(!1),[n,l]=f.useState(null),m=o=>o.length<8?"Password must be at least 8 characters":/[A-Z]/.test(o)?/[a-z]/.test(o)?/[0-9]/.test(o)?null:"Password must contain a number":"Password must contain a lowercase letter":"Password must contain an uppercase letter",d=async()=>{if(!a.current||!a.new||!a.confirm){l({type:"error",text:"Please fill in all fields"});return}if(a.new!==a.confirm){l({type:"error",text:"New passwords do not match"});return}const o=m(a.new);if(o){l({type:"error",text:o});return}r(!0),setTimeout(()=>{l({type:"success",text:"Password changed successfully!"}),c({current:"",new:"",confirm:""}),r(!1)},1500)},u=o=>{s(y=>({...y,[o]:!y[o]}))},g=(o=>{if(!o)return{strength:0,label:"",color:""};let y=0;return o.length>=8&&y++,o.length>=12&&y++,/[A-Z]/.test(o)&&y++,/[a-z]/.test(o)&&y++,/[0-9]/.test(o)&&y++,/[^A-Za-z0-9]/.test(o)&&y++,y<=2?{strength:33,label:"Weak",color:"bg-red-500"}:y<=4?{strength:66,label:"Medium",color:"bg-yellow-500"}:{strength:100,label:"Strong",color:"bg-green-500"}})(a.new);return e.createElement(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3}},e.createElement(k,{className:"border-none shadow-md hover:shadow-lg transition-shadow"},e.createElement(z,{className:"border-b bg-gradient-to-r from-gray-50 to-white"},e.createElement($,{className:"flex items-center gap-2 text-xl"},e.createElement(Ce,{className:"w-5 h-5 text-indigo-600"}),"Security Settings")),e.createElement(U,{className:"p-6"},e.createElement("div",{className:"space-y-6"},e.createElement(ue,null,n&&e.createElement(h.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10}},e.createElement(oe,{variant:n.type==="error"?"destructive":"default",className:n.type==="success"?"bg-green-50 border-green-200":""},n.type==="error"?e.createElement(pe,{className:"h-4 w-4"}):e.createElement(ge,{className:"h-4 w-4 text-green-600"}),e.createElement(me,{className:n.type==="success"?"text-green-800":""},n.text)))),e.createElement("div",{className:"space-y-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"Current Password"),e.createElement("div",{className:"relative"},e.createElement(S,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.createElement(v,{type:t.current?"text":"password",value:a.current,onChange:o=>c({...a,current:o.target.value}),className:"pl-10 pr-10",placeholder:"Enter current password"}),e.createElement("button",{type:"button",onClick:()=>u("current"),className:"absolute right-3 top-3 text-gray-400 hover: text-muted-foreground"},t.current?e.createElement(I,{className:"w-4 h-4"}):e.createElement(L,{className:"w-4 h-4"})))),e.createElement("div",{className:"space-y-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"New Password"),e.createElement("div",{className:"relative"},e.createElement(S,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.createElement(v,{type:t.new?"text":"password",value:a.new,onChange:o=>{c({...a,new:o.target.value}),l(null)},className:"pl-10 pr-10",placeholder:"Enter new password"}),e.createElement("button",{type:"button",onClick:()=>u("new"),className:"absolute right-3 top-3 text-gray-400 hover: text-muted-foreground"},t.new?e.createElement(I,{className:"w-4 h-4"}):e.createElement(L,{className:"w-4 h-4"}))),a.new&&e.createElement(h.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-2"},e.createElement("div",{className:"flex items-center gap-2"},e.createElement("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden"},e.createElement(h.div,{className:`h-full ${g.color}`,initial:{width:0},animate:{width:`${g.strength}%`},transition:{duration:.3}})),e.createElement("span",{className:"text-sm font-medium  text-muted-foreground"},g.label)),e.createElement("p",{className:"text-xs text-gray-500"},"Password must be at least 8 characters with uppercase, lowercase, and numbers"))),e.createElement("div",{className:"space-y-2"},e.createElement(E,{className:"text-gray-700 font-medium"},"Confirm New Password"),e.createElement("div",{className:"relative"},e.createElement(S,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.createElement(v,{type:t.confirm?"text":"password",value:a.confirm,onChange:o=>{c({...a,confirm:o.target.value}),l(null)},className:"pl-10 pr-10",placeholder:"Confirm new password"}),e.createElement("button",{type:"button",onClick:()=>u("confirm"),className:"absolute right-3 top-3 text-gray-400 hover: text-muted-foreground"},t.confirm?e.createElement(I,{className:"w-4 h-4"}):e.createElement(L,{className:"w-4 h-4"})))),e.createElement("div",{className:"flex justify-end pt-4 border-t"},e.createElement(b,{onClick:d,disabled:i,className:"bg-indigo-600 hover:bg-indigo-700 gap-2"},i?e.createElement(e.Fragment,null,e.createElement(h.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}},e.createElement(S,{className:"w-4 h-4"})),"Changing Password..."):e.createElement(e.Fragment,null,e.createElement(S,{className:"w-4 h-4"}),"Change Password")))))))}function Pt(){const{isLoading:t}=Ke();return t?React.createElement("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-white to-purple-50"},React.createElement(h.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}},React.createElement(T,{className:"w-12 h-12 text-indigo-600"}))):React.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50"},React.createElement("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12"},React.createElement(h.div,{className:"mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0}},React.createElement("div",{className:"flex items-center gap-3 mb-2"},React.createElement("h1",{className:"text-3xl md:text-4xl font-bold text-card-foreground"},"Account Settings")),React.createElement("p",{className:" text-muted-foreground"},"Manage your profile, contact information, and security preferences")),React.createElement("div",{className:"space-y-6"},React.createElement(Ge,null),React.createElement("div",{className:"grid lg:grid-cols-2 gap-6"},React.createElement(Xe,null),React.createElement(Oe,null)),React.createElement(et,null))))}export{Pt as default};
