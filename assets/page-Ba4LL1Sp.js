import{s as l,R as e,L as b,u as x}from"./index-DgwETXXl.js";import{u as h,q as E}from"./queryKeys-DRwUXBOd.js";import{C as m,b as i,c as d,a as u}from"./card-Bd3wj2iC.js";import{B as g}from"./button-JwqKODJ6.js";import{C as p}from"./clock-DwQnfI_h.js";import{P as N}from"./plus-DKWVuoAd.js";import{B as c}from"./badge-D_6PR6ji.js";import{C as v}from"./circle-alert-lgjGWSdq.js";import{C as f}from"./circle-check-big-B1M-QEmw.js";import{U as k}from"./users-DTvBPDpn.js";import{M as w}from"./map-pin-CzwWFxnn.js";import{B as y}from"./book-open-D37L2AVm.js";import{G as S}from"./graduation-cap-C1dMd9Hv.js";import{m as C}from"./proxy-BwaxQ4ZJ.js";import"./utils-CHUdG8Hq.js";import"./index-Ciz9C784.js";import"./createLucideIcon-BsWjkkVR.js";const R=Object.freeze({teachers:0,rooms:0,subjects:0,classes:0,timeSlots:0});async function j(){const[t,a,r,o,s]=await Promise.all([l.from("teacher_profile").select("*",{count:"exact",head:!0}),l.from("room").select("*",{count:"exact",head:!0}),l.from("subjects").select("*",{count:"exact",head:!0}),l.from("classes").select("*",{count:"exact",head:!0}),l.from("time_slots").select("*",{count:"exact",head:!0})]),n=t.error||a.error||r.error||o.error||s.error;if(n)throw new Error(n.message||"Failed to load dashboard stats");return{teachers:t.count??0,rooms:a.count??0,subjects:r.count??0,classes:o.count??0,timeSlots:s.count??0}}function A(t={}){const{queryOptions:a={}}=t,r=h({queryKey:E.dashboard.stats,queryFn:j,staleTime:6e4,...a});return{stats:r.data??R,isLoading:r.isLoading,isError:r.isError,error:r.error??null,refetch:r.refetch,statsQuery:r}}function T({label:t,value:a,icon:r,color:o,loading:s}){return React.createElement(m,{className:"bg-card text-card-foreground border border-border shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer"},React.createElement(i,{className:"flex flex-row items-center justify-between pb-2"},React.createElement(d,{className:"text-sm font-medium text-muted-foreground"},t),React.createElement("div",{className:`p-3 rounded-lg ${o} ring-1 ring-black/5 dark:ring-white/10`},React.createElement(r,{className:"w-6 h-6 text-white dark:text-white"}))),React.createElement(u,null,React.createElement("div",{className:"text-2xl font-bold text-foreground"},s?"...":a)))}function B(){const t=[{title:"Add New Teacher",link:"/dashboard/teachers"},{title:"Add New Subject",link:"/dashboard/subjects"},{title:"Add New Room",link:"/dashboard/rooms"},{title:"Add New Class",link:"/dashboard/classes"}];return e.createElement(m,{className:"bg-card text-card-foreground border border-border shadow-sm"},e.createElement(i,null,e.createElement(d,{className:"flex items-center gap-2 text-foreground"},e.createElement(p,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})," ","Quick Actions")),e.createElement(u,{className:"space-y-3"},t.map(a=>e.createElement(b,{key:a.title,to:a.link},e.createElement(g,{variant:"outline",className:"w-full justify-start hover:bg-accent hover:text-accent-foreground transition-colors"},e.createElement(N,{className:"w-4 h-4 mr-2"})," ",a.title)))))}function D({timeSlots:t}){return e.createElement(m,{className:"bg-card text-card-foreground border border-border shadow-sm"},e.createElement(i,null,e.createElement(d,{className:"flex items-center gap-2 text-foreground"},e.createElement(v,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})," ","System Status")),e.createElement(u,{className:"space-y-4"},e.createElement("div",{className:"flex items-center justify-between"},e.createElement("span",{className:"text-sm text-muted-foreground"},"Database Connection"),e.createElement(c,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-950/30 dark:text-emerald-300 dark:border-emerald-800"},e.createElement(f,{className:"w-3 h-3 mr-1"})," Online")),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("span",{className:"text-sm text-muted-foreground"},"Timetable Engine"),e.createElement(c,{variant:"outline",className:"bg-emerald-50 text-emerald-700 border-emerald-200 dark:bg-emerald-950/30 dark:text-emerald-300 dark:border-emerald-800"},e.createElement(f,{className:"w-3 h-3 mr-1"})," Ready")),e.createElement("div",{className:"flex items-center justify-between"},e.createElement("span",{className:"text-sm text-muted-foreground"},"Generated Schedules"),e.createElement(c,{variant:"outline",className:"bg-muted text-muted-foreground border-border"},t," Active")),e.createElement(b,{to:"/dashboard/timetablegen"},e.createElement(g,{className:"w-full mt-4 bg-gradient-to-r from-indigo-500 to-violet-600 text-white shadow-sm hover:from-indigo-600 hover:to-violet-700 dark:from-indigo-600 dark:to-violet-700 dark:hover:from-indigo-500 dark:hover:to-violet-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-indigo-500 dark:focus-visible:ring-indigo-400 dark:ring-offset-background transition-colors"},"Generate New Timetable"))))}function V(){const{stats:t,isLoading:a}=A(),r=x(s=>s.auth.user),o=[{label:"Total Teachers",value:t.teachers,icon:k,color:"bg-blue-500"},{label:"Active Rooms",value:t.rooms,icon:w,color:"bg-green-500"},{label:"Subjects",value:t.subjects,icon:y,color:"bg-purple-500"},{label:"Classes",value:t.classes,icon:S,color:"bg-orange-500"}];return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-background dark:via-background dark:to-background"},e.createElement("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12 space-y-8"},e.createElement("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},e.createElement("div",null,e.createElement("h1",{className:"text-3xl md:text-4xl font-bold text-foreground"},"Welcome Back ",r.name)),e.createElement("div",{className:"text-right"},e.createElement("p",{className:"text-sm  text-muted-foreground"},"Today"),e.createElement("p",{className:"text-lg font-semibold text-card-foreground"},new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})))),e.createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},o.map((s,n)=>e.createElement(C.div,{key:s.label,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:n*.1}},e.createElement(T,{...s,loading:a,statKey:s.label})))),e.createElement("div",{className:"grid md:grid-cols-2 gap-6"},e.createElement(B,null),e.createElement(D,{timeSlots:t.timeSlots}))))}export{V as default};
