import{R as e,r as f,c as F,b as A,s as p,f as B,g as P,L as H}from"./index-DtPpba_i.js";import{B as w}from"./button-BcLH1cul.js";import{m as s}from"./proxy-B_dnwAla.js";import{B as S}from"./building-2-C7qubgM_.js";import{c as L}from"./createLucideIcon-CDU2MX3y.js";import{I as v,A as O}from"./index-BboRggnA.js";import{L as y}from"./label-Y9mnPPE5.js";import{M as T}from"./map-pin-iUrV1o1k.js";import{A as I}from"./arrow-right-Bo1AKs-R.js";import{M as q}from"./mail-CzESZuSX.js";import{L as U}from"./lock-0fVjsQyC.js";import"./utils-Dm1jtZiZ.js";import"./index-CT9tpGOu.js";import"./index-Bn_Sdkge.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],z=L("arrow-left",$);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],M=L("log-in",J);function W({activeMode:t,setActiveMode:o}){return e.createElement("div",{className:"relative bg-slate-100 dark:bg-[#12121a] rounded-2xl p-2 mb-8"},e.createElement(s.div,{className:"absolute top-2 bottom-2 bg-white dark:bg-[#1e1e29] rounded-xl shadow-lg border border-slate-200/50 dark:border-[#2a2a36]",animate:{left:t==="register"?"0.5rem":"50%",right:t==="register"?"50%":"0.5rem"},transition:{type:"spring",stiffness:300,damping:30}}),e.createElement("div",{className:"relative grid grid-cols-2 gap-2"},e.createElement(s.button,{onClick:()=>o("register"),className:`relative z-10 flex items-center justify-center gap-3 py-4 px-6 rounded-xl font-semibold transition-colors duration-300 ${t==="register"?"text-purple-700 dark:text-[#a78bfa]":"text-slate-600 hover:text-slate-800 dark:text-[#c0c0c9] dark:hover:text-[#f4f4f5]"}`,whileHover:{scale:t!=="register"?1.02:1},whileTap:{scale:.98}},e.createElement(S,{className:"w-5 h-5"}),"Register as University"),e.createElement(s.button,{onClick:()=>o("login"),className:`relative z-10 flex items-center justify-center gap-3 py-4 px-6 rounded-xl font-semibold transition-colors duration-300 ${t==="login"?"text-purple-700 dark:text-[#a78bfa]":"text-slate-600 hover:text-slate-800 dark:text-[#c0c0c9] dark:hover:text-[#f4f4f5]"}`,whileHover:{scale:t!=="login"?1.02:1},whileTap:{scale:.98}},e.createElement(M,{className:"w-5 h-5"}),"Login")))}function V(){const[t,o]=f.useState({universityName:"",universityLocation:""}),[l,x]=f.useState(!1),b=(r,u)=>{o(k=>({...k,[r]:u}))},g=async r=>{r.preventDefault(),!(!t.universityName.trim()||!t.universityLocation.trim())&&(x(!0),await new Promise(u=>setTimeout(u,1e3)),localStorage.setItem("universityData",JSON.stringify(t)),x(!1))},d=t.universityName.trim()&&t.universityLocation.trim();return e.createElement(s.div,{initial:{opacity:0,x:-25},animate:{opacity:1,x:0},exit:{opacity:0,x:25},transition:{duration:.4,ease:"easeOut"},className:"max-w-md mx-auto"},e.createElement("div",{className:"text-center mb-8"},e.createElement("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white mb-2"},"Register Your University"),e.createElement("p",{className:"text-slate-600 dark:text-muted-foreground"},"Let's start by collecting some basic information about your institution")),e.createElement("form",{onSubmit:g,className:"space-y-6"},e.createElement("div",{className:"space-y-2"},e.createElement(y,{htmlFor:"universityName",className:"text-sm font-medium text-slate-700 dark:text-slate-300"},"University Name *"),e.createElement("div",{className:"relative"},e.createElement(S,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 dark:text-slate-500"}),e.createElement(v,{id:"universityName",type:"text",placeholder:"Enter your university name",value:t.universityName,onChange:r=>b("universityName",r.target.value),className:`pl-12 py-3 text-base border-slate-300 focus:border-purple-500 focus:ring-purple-500/20 
                         dark:bg-background dark:text-foreground dark:border-white/10 
                         dark:placeholder:text-slate-500 dark:focus:border-purple-500 dark:focus:ring-purple-500/30`}))),e.createElement("div",{className:"space-y-2"},e.createElement(y,{htmlFor:"universityLocation",className:"text-sm font-medium text-slate-700 dark:text-slate-300"},"University Location *"),e.createElement("div",{className:"relative"},e.createElement(T,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 dark:text-slate-500"}),e.createElement(v,{id:"universityLocation",type:"text",placeholder:"City, State/Province, Country",value:t.universityLocation,onChange:r=>b("universityLocation",r.target.value),className:`pl-12 py-3 text-base border-slate-300 focus:border-purple-500 focus:ring-purple-500/20 
                         dark:bg-background dark:text-foreground dark:border-white/10 
                         dark:placeholder:text-slate-500 dark:focus:border-purple-500 dark:focus:ring-purple-500/30`}))),e.createElement(s.div,{whileHover:{scale:d?1.02:1},whileTap:{scale:d?.98:1},className:"pt-4"},e.createElement(w,{type:"submit",disabled:!d||l,className:`w-full bg-gradient-to-r from-purple-600 to-blue-600 
                       hover:from-purple-700 hover:to-blue-700 text-white py-3 text-lg 
                       font-semibold rounded-xl shadow-lg hover:shadow-xl 
                       transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed group`},l?e.createElement(s.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}):e.createElement(e.Fragment,null,"Continue Setup",e.createElement(I,{className:"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"})))),e.createElement("p",{className:"text-sm text-slate-500 dark:text-slate-400 text-center"},"By registering, you agree to our"," ",e.createElement("span",{className:"underline cursor-pointer hover:text-purple-600 dark:hover:text-purple-400"},"Terms of Service")," ","and"," ",e.createElement("span",{className:"underline cursor-pointer hover:text-purple-600 dark:hover:text-purple-400"},"Privacy Policy"),".")))}function G(){const t=F(),o=A(),[l,x]=f.useState({email:"",password:""}),[b,g]=f.useState(!1),[d,r]=f.useState(null),u=(c,a)=>{x(h=>({...h,[c]:a}))},k=async c=>{if(c.preventDefault(),r(null),!l.email||!l.password)return;g(!0);const{data:a,error:h}=await p.auth.signInWithPassword({email:String(l.email),password:String(l.password)});if(h){r(h.message),g(!1);return}let m=[];const{data:_,error:N}=await p.from("user_roles").select("roles(role_name)").eq("user_id",a.user.id);N?r(N.message):m=_?.map(i=>i.roles?.role_name).filter(Boolean);let D={};try{D=B(a.session.access_token)}catch{}if(m.includes("admin")||m.includes("teacher")){const{data:i,error:n}=await p.from("teacher_profile").select("*").eq("email",a.user.email).single();n?r(n.message):a.user={...a.user,...i};const{data:j,error:R}=await p.from("teacher_subjects").select("subject").eq("teacher",i.name);R?r(R.message):a.user={...a.user,subjects:j.map(C=>C.subject)}}if(m.includes("hod")){const{data:i,error:n}=await p.from("hod_profile").select("*").eq("userId",a.user.id).single();n?r(n.message):a.user={...a.user,...i}}if(m.includes("student")){const{data:i,error:n}=await p.from("student_profile").select("*").eq("userId",a.user.id).single();n?r(n.message):a.user={...a.user,...i}}t(P({user:a.user,token:a.session.access_token,roles:m})),localStorage.setItem("user",JSON.stringify(a.user)),localStorage.setItem("token",a.session.access_token),localStorage.setItem("roles",JSON.stringify(m)),g(!1),o("/dashboard")},E=l.email.trim()&&l.password.trim();return d&&console.log(d),React.createElement(s.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.4,ease:"easeOut"}},React.createElement("div",{className:"text-center mb-8"},React.createElement("h2",{className:"text-2xl font-bold text-slate-900 dark:text-[#fafafa] mb-2"},"Welcome Back"),React.createElement("p",{className:"text-slate-600 dark:text-[#a0a0b0]"},"Sign in to your university account to continue")),React.createElement("form",{onSubmit:k,className:"space-y-6"},React.createElement("div",{className:"space-y-2"},React.createElement(y,{htmlFor:"email",className:"text-sm font-medium text-slate-700 dark:text-[#d3d3dc]"},"Email Address *"),React.createElement("div",{className:"relative"},React.createElement(q,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 dark:text-[#7b7b8b]"}),React.createElement(v,{id:"email",type:"email",placeholder:"Enter your email address",value:l.email,onChange:c=>u("email",c.target.value),className:`pl-12 py-3 text-lg border-slate-300 focus:border-purple-500 focus:ring-purple-500/20
                         dark:bg-[#12121a] dark:text-[#f4f4f5] dark:border-[#2a2a36]
                         dark:placeholder:text-[#6b6b7a]
                         dark:focus:border-[#8b5cf6] dark:focus:ring-[#8b5cf6]/30`}))),React.createElement("div",{className:"space-y-2"},React.createElement(y,{htmlFor:"password",className:"text-sm font-medium text-slate-700 dark:text-[#d3d3dc]"},"Password *"),React.createElement("div",{className:"relative"},React.createElement(U,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 dark:text-[#7b7b8b]"}),React.createElement(v,{id:"password",type:"password",placeholder:"Enter your password",value:l.password,onChange:c=>u("password",c.target.value),className:`pl-12 py-3 text-lg border-slate-300 focus:border-purple-500 focus:ring-purple-500/20
                         dark:bg-[#12121a] dark:text-[#f4f4f5] dark:border-[#2a2a36]
                         dark:placeholder:text-[#6b6b7a]
                         dark:focus:border-[#8b5cf6] dark:focus:ring-[#8b5cf6]/30`}))),React.createElement("div",{className:"flex items-center justify-between text-sm"},React.createElement("label",{className:"flex items-center gap-2 text-slate-600 dark:text-[#c0c0c9]"},React.createElement("input",{type:"checkbox",className:"rounded border-slate-300 dark:border-[#3a3a48] dark:bg-[#1a1a22]"}),"Remember me"),React.createElement("a",{href:"#",className:"text-purple-600 hover:text-purple-700 dark:text-[#a78bfa] dark:hover:text-[#c4b5fd] font-medium"},"Forgot password?")),React.createElement(s.div,{whileHover:{scale:E?1.02:1},whileTap:{scale:E?.98:1},className:"pt-4"},React.createElement(w,{type:"submit",disabled:!E||b,className:`w-full bg-gradient-to-r from-purple-600 to-blue-600
                       hover:from-purple-700 hover:to-blue-700
                       text-white py-3 text-lg font-semibold rounded-xl
                       shadow-lg hover:shadow-xl transition-all duration-300
                       disabled:opacity-50 disabled:cursor-not-allowed group`},b?React.createElement(s.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full"}):React.createElement(React.Fragment,null,"Sign In",React.createElement(I,{className:"ml-2 w-5 h-5 group-hover:translate-x-1 transition-transform"}))))))}function ce(){const[t,o]=f.useState("register");return e.createElement("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-purple-50/30 dark:from-background dark:via-background dark:to-background flex items-center justify-center p-6"},e.createElement("div",{className:"w-full max-w-2xl"},e.createElement(s.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},className:"mb-8"},e.createElement(H,{to:"/"},e.createElement(w,{variant:"ghost",className:"text-slate-600 hover:text-slate-900 dark:text-slate-300 dark:hover:text-white p-2"},e.createElement(z,{className:"w-5 h-5 mr-2"}),"Back to Home"))),e.createElement(s.div,{initial:{opacity:0,y:40},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"bg-white/80 dark:bg-background/70 backdrop-blur-sm rounded-3xl border border-slate-200/50 dark:border-white/10 shadow-2xl overflow-hidden"},e.createElement("div",{className:"bg-gradient-to-r from-slate-100 to-slate-50 dark:from-white/5 dark:to-white/0 px-8 py-6 border-b border-slate-200/50 dark:border-white/10"},e.createElement(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-center"},e.createElement("h1",{className:"text-3xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 dark:from-slate-100 dark:to-slate-300 bg-clip-text text-transparent mb-2"},"Welcome to Calvio"),e.createElement("p",{className:"text-slate-600 dark:text-muted-foreground"},"Get started with intelligent university scheduling"))),e.createElement("div",{className:"p-8 pb-4"},e.createElement(W,{activeMode:t,setActiveMode:o})),e.createElement("div",{className:"px-8 pb-8"},e.createElement(O,{mode:"wait"},t==="register"?e.createElement(V,{key:"register"}):e.createElement(G,{key:"login"}))))))}export{ce as default};
