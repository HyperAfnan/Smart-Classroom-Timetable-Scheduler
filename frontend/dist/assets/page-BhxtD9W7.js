import{s as l,j as e,L as h,u as b}from"./index-DMwWV6LZ.js";import{u as f,q as g}from"./queryKeys-B8YbpHg6.js";import{C as n,b as d,c as m,a as u}from"./card-CZDdEFOl.js";import{B as j}from"./button-DdLPv1v6.js";import{C as p}from"./clock-BSwmNox5.js";import{P as N}from"./plus-DJfzYg-M.js";import{B as c}from"./badge-lPAdpJMK.js";import{C as y}from"./circle-alert-DaODrJr0.js";import{C as x}from"./circle-check-big-CnA5k_rT.js";import{U as w}from"./users-BpObsUQF.js";import{M as v}from"./map-pin-ZKOn9kME.js";import{B as S}from"./book-open-DtpCj_Lg.js";import{G as C}from"./graduation-cap-VZGpxI3y.js";import{m as k}from"./proxy-BVDPlYaL.js";import"./createLucideIcon-De5o52GV.js";const A=Object.freeze({teachers:0,rooms:0,subjects:0,classes:0,timeSlots:0});async function T(){const[s,t,a,o,r]=await Promise.all([l.from("teacher_profile").select("*",{count:"exact",head:!0}),l.from("room").select("*",{count:"exact",head:!0}),l.from("subjects").select("*",{count:"exact",head:!0}),l.from("classes").select("*",{count:"exact",head:!0}),l.from("time_slots").select("*",{count:"exact",head:!0})]),i=s.error||t.error||a.error||o.error||r.error;if(i)throw new Error(i.message||"Failed to load dashboard stats");return{teachers:s.count??0,rooms:t.count??0,subjects:a.count??0,classes:o.count??0,timeSlots:r.count??0}}function R(s={}){const{queryOptions:t={}}=s,a=f({queryKey:g.dashboard.stats,queryFn:T,staleTime:6e4,...t});return{stats:a.data??A,isLoading:a.isLoading,isError:a.isError,error:a.error??null,refetch:a.refetch,statsQuery:a}}function B({label:s,value:t,icon:a,color:o,loading:r}){return e.jsxs(n,{className:"hover:shadow-lg transition-all duration-300 cursor-pointer border-0 shadow-md",children:[e.jsxs(d,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(m,{className:"text-sm font-medium text-slate-600",children:s}),e.jsx("div",{className:`p-3 rounded-lg ${o}`,children:e.jsx(a,{className:"w-6 h-6 text-white"})})]}),e.jsx(u,{children:e.jsx("div",{className:"text-2xl font-bold text-slate-900",children:r?"...":t})})]})}function D(){const s=[{title:"Add New Teacher",link:"/dashboard/teachers",color:"hover:bg-blue-50"},{title:"Add New Subject",link:"/dashboard/subjects",color:"hover:bg-purple-50"},{title:"Add New Room",link:"/dashboard/rooms",color:"hover:bg-green-50"},{title:"Add New Class",link:"/dashboard/classes",color:"hover:bg-orange-50"}];return e.jsxs(n,{className:"border-0 shadow-md",children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5 text-indigo-600"})," Quick Actions"]})}),e.jsx(u,{className:"space-y-3",children:s.map(t=>e.jsx(h,{to:t.link,children:e.jsxs(j,{variant:"outline",className:`w-full justify-start ${t.color}`,children:[e.jsx(N,{className:"w-4 h-4 mr-2"})," ",t.title]})},t.title))})]})}function E({timeSlots:s}){return e.jsxs(n,{className:"border-0 shadow-md",children:[e.jsx(d,{children:e.jsxs(m,{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5 text-amber-600"})," System Status"]})}),e.jsxs(u,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Database Connection"}),e.jsxs(c,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx(x,{className:"w-3 h-3 mr-1"})," Online"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Timetable Engine"}),e.jsxs(c,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:[e.jsx(x,{className:"w-3 h-3 mr-1"})," Ready"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:"Generated Schedules"}),e.jsxs(c,{variant:"outline",className:"bg-slate-50 text-slate-700 border-slate-200",children:[s," Active"]})]}),e.jsx(h,{to:"/dashboard/timetablegen",children:e.jsx(j,{className:"w-full mt-4 bg-gradient-to-r from-indigo-500 to-indigo-600",children:"Generate New Timetable"})})]})]})}function I(){const{stats:s,isLoading:t}=R(),a=b(r=>r.auth.user),o=[{label:"Total Teachers",value:s.teachers,icon:w,color:"bg-blue-500"},{label:"Active Rooms",value:s.rooms,icon:v,color:"bg-green-500"},{label:"Subjects",value:s.subjects,icon:S,color:"bg-purple-500"},{label:"Classes",value:s.classes,icon:C,color:"bg-orange-500"}];return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("div",{children:e.jsxs("h1",{className:"text-3xl font-bold text-slate-900",children:["Welcome Back ",a.name]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm  text-muted-foreground",children:"Today"}),e.jsx("p",{className:"text-lg font-semibold text-card-foreground",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((r,i)=>e.jsx(k.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},children:e.jsx(B,{...r,loading:t,statKey:r.title})},r.title))}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(D,{}),e.jsx(E,{timeSlots:s.timeSlots})]})]})}export{I as default};
