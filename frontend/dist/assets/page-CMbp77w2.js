import{j as e,r as i}from"./index-DMwWV6LZ.js";import{c as k}from"./createLucideIcon-De5o52GV.js";import{M as U}from"./map-pin-ZKOn9kME.js";import{U as $}from"./users-BpObsUQF.js";import{C as V}from"./clock-BSwmNox5.js";import{C as F}from"./calendar-BEswqjrj.js";const B=({title:s="My Schedule",subtitle:t="View and manage your teaching schedule",weekLabel:r,dateRange:n,rightContent:l=null})=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-card-foreground",children:s}),e.jsx("p",{className:" text-muted-foreground mt-1",children:t}),(r||n)&&e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 mt-3",children:[r&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-50 text-blue-700",children:r}),n&&e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:n})]})]}),l&&e.jsx("div",{className:"flex items-center justify-start md:justify-end",children:l})]}),G=[{key:"week",label:"Week"},{key:"day",label:"Day"}],Y=({value:s,onChange:t,options:r=G,className:n="",disabled:l=!1})=>{const o=(a,u)=>{if(!l){if(a.key==="ArrowRight"||a.key==="ArrowLeft"){a.preventDefault();const d=a.key==="ArrowRight"?1:-1,m=(u+d+r.length)%r.length,x=r[m];x&&t(x.key)}if(a.key==="Enter"||a.key===" "){a.preventDefault();const d=r[u];d&&t(d.key)}}};return e.jsx("div",{role:"tablist","aria-label":"Schedule view mode",className:`flex bg-gray-100 rounded-lg p-1 select-none ${n}`,children:r.map((a,u)=>{const d=a.key===s;return e.jsxs("button",{role:"tab",type:"button","aria-selected":d,tabIndex:d?0:-1,disabled:l,onClick:()=>!l&&t(a.key),onKeyDown:m=>o(m,u),className:["relative px-4 py-2 rounded-md text-sm font-medium transition-colors outline-none","focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1",d?"bg-white text-card-foreground shadow-sm":" text-muted-foreground hover:text-card-foreground",l?"opacity-50 cursor-not-allowed hover: text-muted-foreground":""].join(" "),children:[a.label,d&&e.jsx("span",{className:"absolute inset-0 rounded-md ring-0 pointer-events-none"})]},a.key)})})};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],K=k("activity",q);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],E=k("chevron-left",z);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],L=k("chevron-right",J);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],X=k("rotate-ccw",Q),Z=({currentWeek:s,weekLabel:t,dateRange:r,onPrev:n,onNext:l,onToday:o,disablePrev:a=!1,disableNext:u=!1,className:d=""})=>e.jsxs("div",{className:`flex items-center justify-between w-full ${d}`,role:"group","aria-label":"Week navigation",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{ariaLabel:"Previous week",onClick:n,disabled:a,icon:e.jsx(E,{className:"h-5 w-5"})}),e.jsx(p,{ariaLabel:"Next week",onClick:l,disabled:u,icon:e.jsx(L,{className:"h-5 w-5"}),className:"md:hidden"})]}),e.jsxs("div",{className:"text-center px-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-card-foreground select-none",children:t}),r&&e.jsx("p",{className:"text-sm  text-muted-foreground mt-0.5 select-none",children:r})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s!==0&&e.jsx(p,{ariaLabel:"Go to current week",onClick:o,icon:e.jsx(X,{className:"h-5 w-5"}),title:"Today"}),e.jsx(p,{ariaLabel:"Previous week",onClick:n,disabled:a,icon:e.jsx(E,{className:"h-5 w-5"}),className:"hidden md:inline-flex"}),e.jsx(p,{ariaLabel:"Next week",onClick:l,disabled:u,icon:e.jsx(L,{className:"h-5 w-5"})})]})]}),p=({ariaLabel:s,onClick:t,icon:r,disabled:n=!1,className:l="",title:o})=>e.jsx("button",{type:"button","aria-label":s,title:o||s,onClick:t,disabled:n,className:["p-2 rounded-lg border border-transparent bg-white"," text-muted-foreground hover:text-card-foreground hover:bg-gray-50","focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500","disabled:opacity-40 disabled:cursor-not-allowed","transition-colors",l].join(" "),children:r}),f=["Monday","Tuesday","Wednesday","Thursday","Friday"],I=["8:00 AM","9:00 AM","10:00 AM","11:00 AM","12:00 PM","1:00 PM","2:00 PM","3:00 PM","4:00 PM","5:00 PM"],ee={Monday:[{time:"9:00 AM",subject:"Calculus I",room:"Room 301",students:42,duration:1},{time:"11:00 AM",subject:"Office Hours",room:"Office 12B",students:null,duration:2},{time:"2:00 PM",subject:"Statistics",room:"Lab A",students:28,duration:1}],Tuesday:[{time:"10:00 AM",subject:"Algebra II",room:"Room 205",students:35,duration:1},{time:"2:00 PM",subject:"Calculus I",room:"Room 301",students:42,duration:1},{time:"4:00 PM",subject:"Faculty Meeting",room:"Conference Room",students:null,duration:1}],Wednesday:[{time:"9:00 AM",subject:"Statistics",room:"Lab A",students:28,duration:2},{time:"1:00 PM",subject:"Algebra II",room:"Room 205",students:35,duration:1}],Thursday:[{time:"10:00 AM",subject:"Calculus I",room:"Room 301",students:42,duration:1},{time:"11:00 AM",subject:"Office Hours",room:"Office 12B",students:null,duration:2},{time:"3:00 PM",subject:"Statistics",room:"Lab A",students:28,duration:1}],Friday:[{time:"9:00 AM",subject:"Algebra II",room:"Room 205",students:35,duration:1},{time:"11:00 AM",subject:"Calculus I",room:"Room 301",students:42,duration:1}]},T={"Office Hours":{container:"bg-blue-50 border border-blue-200 hover:shadow-sm",text:"text-blue-700"},"Faculty Meeting":{container:"bg-purple-50 border border-purple-200 hover:shadow-sm",text:"text-purple-700"},default:{container:"bg-green-50 border border-green-200 hover:shadow-sm",text:"text-green-700"}},_=s=>!s||!s.subject?T.default:T[s.subject]||T.default,te=(s=0,t="en-US",r=f)=>{const n=new Date,o=(n.getDay()+6)%7,a=new Date(n);return a.setDate(n.getDate()-o+s*7),r.map((u,d)=>{const m=new Date(a);return m.setDate(a.getDate()+d),m.toLocaleDateString(t,{month:"short",day:"numeric"})})},O=(s,t,r)=>(s?.[t]||[]).find(l=>l.time===r),se=s=>{let t=0,r=0,n=0;return Object.values(s||{}).forEach(l=>{l.forEach(o=>{typeof o.students=="number"&&o.students>0&&(t+=o.duration||1,r+=1,n+=o.students)})}),{teachingHours:t,sessionCount:r,totalStudents:n}},W=s=>Object.fromEntries(Object.entries(s||{}).map(([t,r])=>[t,r.map(n=>({...n}))])),re=({schedule:s,days:t=f,timeSlots:r=I,activeDay:n=null,onEntryClick:l,className:o="",emptyCellRenderer:a})=>{const u=i.useMemo(()=>n&&t.includes(n)?[n]:t,[n,t]),d=u.length+1;return e.jsxs("div",{className:["bg-white rounded-xl shadow-sm border  border-border-200 overflow-hidden",o].join(" "),children:[e.jsx(ne,{visibleDays:u,dateColumnCount:d}),e.jsx("div",{role:"rowgroup",className:"divide-y divide-gray-200",children:r.map(m=>e.jsx(oe,{timeSlot:m,visibleDays:u,schedule:s,onEntryClick:l,emptyCellRenderer:a},m))})]})},ne=({visibleDays:s})=>e.jsxs("div",{role:"row",className:"grid",style:{gridTemplateColumns:`160px repeat(${s.length}, 1fr)`},children:[e.jsx("div",{className:"p-4 bg-gray-50 border-r  border-border-200",role:"columnheader",children:e.jsx("span",{className:"text-sm font-medium  text-muted-foreground",children:"Time"})}),s.map(t=>e.jsx("div",{role:"columnheader",className:"p-4 bg-gray-50 border-r  border-border-200 last:border-r-0",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm font-medium text-card-foreground",children:t})})},t))]}),oe=({timeSlot:s,visibleDays:t,schedule:r,onEntryClick:n,emptyCellRenderer:l})=>e.jsxs("div",{role:"row",className:"grid min-h-16",style:{gridTemplateColumns:`160px repeat(${t.length}, 1fr)`},children:[e.jsx("div",{role:"rowheader",className:"p-4 bg-gray-50 border-r  border-border-200 flex items-center",children:e.jsx("span",{className:"text-sm font-medium  text-muted-foreground",children:s})}),t.map(o=>{const a=O(r,o,s);return e.jsx(ae,{day:o,timeSlot:s,entry:a,onEntryClick:n,emptyCellRenderer:l},`${o}-${s}`)})]}),ae=({day:s,timeSlot:t,entry:r,onEntryClick:n,emptyCellRenderer:l})=>{const o=()=>{r&&n&&n(r,{day:s,timeSlot:t})};if(!r)return e.jsx("div",{role:"gridcell",className:"border-r  border-border-200 last:border-r-0 p-2","data-empty":"true",children:l?l({day:s,timeSlot:t}):null});const a=_(r);return e.jsx("div",{role:"gridcell",className:"border-r  border-border-200 last:border-r-0 p-2",children:e.jsx("button",{type:"button",onClick:o,className:["w-full text-left p-3 rounded-lg cursor-pointer transition-shadow",a.container,"focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-1"].join(" "),children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:`text-sm font-medium ${a.text}`,children:r.subject}),e.jsx(P,{icon:U,text:r.room}),typeof r.students=="number"&&e.jsx(P,{icon:$,text:`${r.students} student${r.students===1?"":"s"}`})]})})})},P=({icon:s,text:t})=>e.jsxs("div",{className:"flex items-center space-x-1 text-xs  text-muted-foreground",children:[e.jsx(s,{className:"h-3 w-3"}),e.jsx("span",{className:"truncate",children:t})]}),le=({metrics:s={},loading:t=!1,className:r="",cards:n})=>{const{teachingHours:l=0,sessionCount:o=0,totalStudents:a=0}=s||{},u=o>0?Math.round(a/o):0,d=[{key:"teachingHours",label:"Weekly Hours",value:l,icon:e.jsx(V,{className:"h-6 w-6 text-blue-600"}),accentClasses:"text-blue-600",description:"Teaching hours this week"},{key:"sessions",label:"Classes",value:o,icon:e.jsx(F,{className:"h-6 w-6 text-green-600"}),accentClasses:"text-green-600",description:"Scheduled classes"},{key:"students",label:"Students",value:a,icon:e.jsx($,{className:"h-6 w-6 text-purple-600"}),accentClasses:"text-purple-600",description:"Total students taught"},{key:"avgStudents",label:"Avg / Class",value:u,icon:e.jsx(K,{className:"h-6 w-6 text-amber-600"}),accentClasses:"text-amber-600",description:"Average students per session"}],m=n&&Array.isArray(n)?n:d;return e.jsx("div",{className:["grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",r].join(" "),children:m.map(x=>e.jsx(ce,{...x,loading:t},x.key))})},ce=({label:s,value:t,icon:r,accentClasses:n="text-blue-600",description:l,loading:o=!1})=>e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border  border-border-200 relative overflow-hidden",children:[e.jsx("div",{"aria-hidden":"true",className:"absolute -right-6 -top-6 w-24 h-24 rounded-full bg-gradient-to-br from-gray-50 to-gray-100"}),e.jsxs("div",{className:"flex items-center space-x-3 mb-4 relative",children:[e.jsx("div",{className:"flex items-center justify-center p-2 bg-gray-50 rounded-lg",children:r}),e.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:s})]}),o?e.jsx(de,{}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:["text-3xl font-bold tracking-tight",n].join(" "),children:ie(t)?"â€”":t}),l&&e.jsx("p",{className:"text-sm  text-muted-foreground mt-1",children:l})]})]}),ie=s=>s==null||typeof s=="number"&&isNaN(s),de=()=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-9 w-20 bg-gray-200 rounded-md mb-2"}),e.jsx("div",{className:"h-3 w-32 bg-gray-200 rounded"})]}),ue=(s=ee)=>{const[t,r]=i.useState(0),[n,l]=i.useState("week"),[o,a]=i.useState(()=>W(s)),u=i.useMemo(()=>te(t,"en-US",f),[t]),d=i.useMemo(()=>se(o),[o]),m=i.useMemo(()=>{const c=[];return f.forEach(h=>{(o[h]||[]).forEach(b=>{c.push({day:h,...b,styles:_(b)})})}),c},[o]),x=i.useCallback((c,h)=>O(o,c,h),[o]),w=i.useCallback((c,h)=>!!x(c,h),[x]),N=i.useCallback(()=>r(c=>c-1),[]),y=i.useCallback(()=>r(c=>c+1),[]),C=i.useCallback(()=>r(0),[]),M=i.useCallback(c=>l(c),[]),S=i.useCallback((c,h)=>{f.includes(c)&&a(b=>({...b,[c]:[...b[c]||[],{...h}]}))},[]),A=i.useCallback((c,h,b,v)=>{f.includes(c)&&a(j=>({...j,[c]:(j[c]||[]).map(g=>g.time===h&&g.subject===b?{...g,...v}:g)}))},[]),D=i.useCallback(({day:c,time:h,subject:b,predicate:v})=>{f.includes(c)&&a(j=>({...j,[c]:(j[c]||[]).filter(g=>v?!v(g):!(g.time===h&&g.subject===b))}))},[]),R=i.useCallback(c=>{a(W(c||{}))},[]),H=i.useMemo(()=>{if(t===0)return"This Week";if(t>0)return`${t} Week${t>1?"s":""} Ahead`;const c=Math.abs(t);return`${c} Week${c>1?"s":""} Ago`},[t]);return{currentWeek:t,viewType:n,schedule:o,weekDates:u,metrics:d,flatEvents:m,weekLabel:H,getEntryAt:x,isOccupied:w,goToPreviousWeek:N,goToNextWeek:y,goToCurrentWeek:C,changeView:M,addEntry:S,updateEntry:A,removeEntry:D,replaceSchedule:R,DAYS:f,TIME_SLOTS:I}},je=()=>{const{currentWeek:s,viewType:t,schedule:r,weekDates:n,metrics:l,weekLabel:o,goToPreviousWeek:a,goToNextWeek:u,goToCurrentWeek:d,changeView:m,DAYS:x,TIME_SLOTS:w}=ue(),N=i.useMemo(()=>{if(t!=="day")return null;const A=(new Date().getDay()+6)%7;return x[A]||x[0]},[t,x]),y=i.useMemo(()=>!n||n.length===0?"":n.length===1?n[0]:`${n[0]} - ${n[n.length-1]}`,[n]),C=i.useCallback(()=>{},[]),M=i.useCallback(()=>null,[]);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(B,{weekLabel:o,dateRange:y,rightContent:e.jsx(Y,{value:t,onChange:m})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border  border-border-200 p-4",children:e.jsx(Z,{currentWeek:s,weekLabel:o,dateRange:y,onPrev:a,onNext:u,onToday:d})}),e.jsx(le,{metrics:l}),e.jsx(re,{schedule:r,days:x,timeSlots:w,activeDay:N,onEntryClick:C,emptyCellRenderer:M})]})};export{je as default};
