import{h as se,r as x,j as e,s as C,g as re}from"./index-DMwWV6LZ.js";import{a as E,B as N}from"./button-DdLPv1v6.js";import{c as ne,b as ie,u as F}from"./index-CK0ERQAK.js";import{P as R}from"./index-B5rXH1kc.js";import{C as _,b as q,c as z,a as $}from"./card-CZDdEFOl.js";import{u as oe}from"./useTeachers-BwAFSO2X.js";import{u as D}from"./useMutation-rOajDVhN.js";import{u as B,q as w}from"./queryKeys-B8YbpHg6.js";import{m as p}from"./proxy-BVDPlYaL.js";import{L as T,C as le,A as ce,a as de}from"./alert-CjM6HumU.js";import{c as b}from"./createLucideIcon-De5o52GV.js";import{I as j}from"./input-D6FpiF2T.js";import{L as y,a as S}from"./label-w-tQkdvG.js";import{U as H}from"./user-mTgmwgvo.js";import{B as ue}from"./building-2-BtY7HNjz.js";import{X as Z}from"./x-DXQQL3e4.js";import{P as Q}from"./phone-CYlXbF-L.js";import{M as V}from"./mail-Ct3AERel.js";import{A as me}from"./index-Bs2UPQaf.js";import{C as he}from"./circle-alert-DaODrJr0.js";import{C as fe}from"./circle-check-big-CnA5k_rT.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],xe=b("briefcase",pe);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ye=b("camera",ge);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],A=b("eye-off",je);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I=b("eye",ve);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],G=b("pen",Ne);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],P=b("save",be);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Se=b("shield",we);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Pe=b("upload",Ce);var L={exports:{}},M={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K;function Ee(){if(K)return M;K=1;var a=se();function n(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var t=typeof Object.is=="function"?Object.is:n,o=a.useState,l=a.useEffect,s=a.useLayoutEffect,r=a.useDebugValue;function i(h,f){var c=f(),g=o({inst:{value:c,getSnapshot:f}}),v=g[0].inst,k=g[1];return s(function(){v.value=c,v.getSnapshot=f,d(v)&&k({inst:v})},[h,c,f]),l(function(){return d(v)&&k({inst:v}),h(function(){d(v)&&k({inst:v})})},[h]),r(c),c}function d(h){var f=h.getSnapshot;h=h.value;try{var c=f();return!t(h,c)}catch{return!0}}function u(h,f){return f()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:i;return M.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:m,M}var W;function _e(){return W||(W=1,L.exports=Ee()),L.exports}var ke=_e();function Ae(){return ke.useSyncExternalStore(Ie,()=>!0,()=>!1)}function Ie(){return()=>{}}var U="Avatar",[Le,Na]=ne(U),[Me,J]=Le(U),X=x.forwardRef((a,n)=>{const{__scopeAvatar:t,...o}=a,[l,s]=x.useState("idle");return e.jsx(Me,{scope:t,imageLoadingStatus:l,onImageLoadingStatusChange:s,children:e.jsx(R.span,{...o,ref:n})})});X.displayName=U;var O="AvatarImage",ee=x.forwardRef((a,n)=>{const{__scopeAvatar:t,src:o,onLoadingStatusChange:l=()=>{},...s}=a,r=J(O,t),i=Fe(o,s),d=ie(u=>{l(u),r.onImageLoadingStatusChange(u)});return F(()=>{i!=="idle"&&d(i)},[i,d]),i==="loaded"?e.jsx(R.img,{...s,ref:n,src:o}):null});ee.displayName=O;var ae="AvatarFallback",te=x.forwardRef((a,n)=>{const{__scopeAvatar:t,delayMs:o,...l}=a,s=J(ae,t),[r,i]=x.useState(o===void 0);return x.useEffect(()=>{if(o!==void 0){const d=window.setTimeout(()=>i(!0),o);return()=>window.clearTimeout(d)}},[o]),r&&s.imageLoadingStatus!=="loaded"?e.jsx(R.span,{...l,ref:n}):null});te.displayName=ae;function Y(a,n){return a?n?(a.src!==n&&(a.src=n),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Fe(a,{referrerPolicy:n,crossOrigin:t}){const o=Ae(),l=x.useRef(null),s=o?(l.current||(l.current=new window.Image),l.current):null,[r,i]=x.useState(()=>Y(s,a));return F(()=>{i(Y(s,a))},[s,a]),F(()=>{const d=h=>()=>{i(h)};if(!s)return;const u=d("loaded"),m=d("error");return s.addEventListener("load",u),s.addEventListener("error",m),n&&(s.referrerPolicy=n),typeof t=="string"&&(s.crossOrigin=t),()=>{s.removeEventListener("load",u),s.removeEventListener("error",m)}},[s,t,n]),r}var Te=X,Re=ee,qe=te;function ze({className:a,...n}){return e.jsx(Te,{"data-slot":"avatar",className:E("relative flex size-8 shrink-0 overflow-hidden rounded-full",a),...n})}function $e({className:a,...n}){return e.jsx(Re,{"data-slot":"avatar-image",className:E("aspect-square size-full",a),...n})}function Ue({className:a,...n}){return e.jsx(qe,{"data-slot":"avatar-fallback",className:E("bg-muted flex size-full items-center justify-center rounded-full",a),...n})}const De=Object.freeze([]),Be=Object.freeze([]);async function He(a){const{data:n,error:t}=await C.from("teacher_profile").select("*").eq("email",a).single();if(t)throw new Error(t.message||"Failed to fetch teacher profile");return n??[]}async function Qe(a){const{data:n,error:t}=await C.from("teacher_subjects").select("*").eq("teacher",a).single();if(t)throw new Error(t.message||"Failed to fetch teacher subjects");return n??[]}function Ve(a={}){const{email:n,name:t,teachersProfileQueryOptions:o={},teachersSubjectsQueryOptions:l={}}=a,s=B({queryKey:w.teachers.profile(n),queryFn:()=>He(n),staleTime:6e4,enabled:!!n,...o}),r=B({queryKey:w.teacherSubjects.byTeacher(t),queryFn:()=>Qe(t),staleTime:10*6e4,enabled:!!t,...l}),i=!!(s.isLoading||r.isLoading),d=!!(r.isError||s.isError),u=r.error??s.error??null,m=async()=>{const[h,f]=await Promise.all([s.refetch(),r.refetch()]);return{teachersSubjects:f.data??[],teachersProfile:h.data??[]}};return{teachersSubjects:r.data??De,teachersProfile:s.data??Be,isLoading:i,isError:d,error:u,refetch:m,teachersSubjectsQuery:r,teachersProfileQuery:s}}async function Ke(a,n){const t=n.name.split(".").pop(),o=`${Date.now()}.${t}`,{error:l,data:s}=await C.storage.from("avatars").upload(`teacher/${o}`,profilePicPath);if(l){console.error("Upload failed:",l.message);return}const{data:r,error:i}=await C.from("profiles").update({avatar_url:s.fullPath}).eq("id",a);if(i){console.error("Profile update failed:",i.message);return}return r}async function We({id:a,updates:n}){const{data:t,error:o}=await C.from("teacher_profile").update(n).eq("id",a).select("*").single();if(o)throw new Error(o.message||"Failed to update teacher");return t}function Ye({createOptions:a,updateOptions:n}={}){const t=re(),o=D({mutationFn:Ke,onSuccess:async(s,r,i)=>{t.setQueryData(w.teachers.profile,d=>{const u=Array.isArray(d)?d:[];return[s,...u]}),await t.invalidateQueries({queryKey:w.teachers.profile}),a?.onSuccess&&a.onSuccess(s,r,i)},onError:(s,r,i)=>{a?.onError&&a.onError(s,r,i)},...a}),l=D({mutationFn:We,onSuccess:async(s,r,i)=>{t.setQueryData(w.teachers.all,d=>Array.isArray(d)?d.map(u=>u?.id===s?.id?{...u,...s}:u):d),await t.invalidateQueries({queryKey:w.teachers.all}),n?.onSuccess&&n.onSuccess(s,r,i)},onError:(s,r,i)=>{n?.onError&&n.onError(s,r,i)},...n});return{uploadProfilePic:o.mutate,uploadProfilePicAsync:o.mutateAsync,updateTeacher:l.mutate,updateTeacherAsync:l.mutateAsync,uploadProfilePicStatus:o,updateStatus:l}}function Ze(a){const{teachers:n}=oe(),{uploadProfilePicAsync:t,uploadProfilePicStatus:o}=Ye(),l=x.useRef(null),s=async i=>{const d=i.target.files?.[0];if(d){if(!d.type.startsWith("image/")){alert("Please select an image file");return}if(d.size>10*1024*1024){alert("File size must be less than 5MB");return}try{const u=i.target.files?.[0];await t(n.id,u)}catch(u){console.error("Error uploading profile picture:",u),alert("Failed to upload profile picture. Please try again.")}}},r=()=>a?.full_name?a?.full_name.split(" ").map(i=>i[0]).join("").toUpperCase().slice(0,2):"T";return e.jsx(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsx(_,{className:"p-8 bg-gradient-to-br from-indigo-50 to-white border-none shadow-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-6",children:[e.jsxs(p.div,{className:"relative group",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[e.jsxs(ze,{className:"w-32 h-32 border-4 border-white shadow-xl",children:[e.jsx($e,{src:a?.profile_picture_url,alt:a?.full_name}),e.jsx(Ue,{className:"text-3xl font-semibold bg-gradient-to-br from-indigo-500 to-purple-600 text-white",children:r()})]}),e.jsx(p.button,{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full opacity-0 group-hover:opacity-100 transition-opacity cursor-pointer",onClick:()=>l.current?.click(),disabled:o.isPending,whileTap:{scale:.95},children:o.isPending?e.jsx(T,{className:"w-8 h-8 text-white animate-spin"}):o.isPending?e.jsx(le,{className:"w-8 h-8 text-green-400"}):e.jsx(ye,{className:"w-8 h-8 text-white"})}),e.jsx("input",{ref:l,type:"file",accept:"image/*",onChange:s,className:"hidden"})]}),e.jsxs("div",{className:"flex-1 text-center md:text-left",children:[e.jsx(p.h1,{className:"text-3xl font-bold text-card-foreground mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:a?.full_name}),e.jsx(p.p,{className:"text-lg text-indigo-600 font-medium mb-1",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:a?.position||"Teacher"}),e.jsx(p.p,{className:" text-muted-foreground",initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:a?.email})]}),e.jsx(N,{variant:"outline",size:"sm",onClick:()=>l.current?.click(),disabled:o.isPending,className:"gap-2",children:o.isPending?e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-4 h-4"}),"Change Photo"]})})]})})})}function Ge({className:a,...n}){return e.jsx("textarea",{"data-slot":"textarea",className:E("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...n})}function Je({user:a,onUpdate:n}){const[t,o]=x.useState(!1),[l,s]=x.useState(!1),[r,i]=x.useState({full_name:a?.full_name||"",position:a?.position||"",department:a?.department||"",bio:a?.bio||""}),d=async()=>{s(!0);try{await User.updateMyUserData({position:r.position,department:r.department,bio:r.bio}),n(),o(!1)}catch(m){console.error("Error updating personal info:",m),alert("Failed to update information. Please try again.")}s(!1)},u=()=>{i({full_name:a?.full_name||"",position:a?.position||"",department:a?.department||"",bio:a?.bio||""}),o(!1)};return e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:e.jsxs(_,{className:"border-none shadow-md hover:shadow-lg transition-shadow",children:[e.jsx(q,{className:"border-b bg-gradient-to-r from-gray-50 to-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(z,{className:"flex items-center gap-2 text-xl",children:[e.jsx(H,{className:"w-5 h-5 text-indigo-600"}),"Personal Information"]}),!t&&e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>o(!0),className:"gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Edit"]})]})}),e.jsx($,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"Full Name"}),e.jsx(j,{value:r.full_name,disabled:!0,className:"bg-gray-50",icon:e.jsx(H,{className:"w-4 h-4 text-gray-400"})}),e.jsx("p",{className:"text-xs text-gray-500",children:"Contact support to change your name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"Position / Title"}),e.jsxs("div",{className:"relative",children:[e.jsx(xe,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(j,{value:r.position,onChange:m=>i({...r,position:m.target.value}),disabled:!t,className:t?"pl-10":"bg-gray-50 pl-10",placeholder:"e.g., Senior Mathematics Teacher"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"Department"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(j,{value:r.department,onChange:m=>i({...r,department:m.target.value}),disabled:!t,className:t?"pl-10":"bg-gray-50 pl-10",placeholder:"e.g., Mathematics & Science"})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"Bio"}),e.jsx(Ge,{value:r.bio,onChange:m=>i({...r,bio:m.target.value}),disabled:!t,className:t?"":"bg-gray-50",placeholder:"Tell us about yourself...",rows:4})]})]}),t&&e.jsxs(p.div,{className:"flex justify-end gap-3 pt-4 border-t",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs(N,{variant:"outline",onClick:u,disabled:l,children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsx(N,{onClick:d,disabled:l,className:"bg-indigo-600 hover:bg-indigo-700",children:l?e.jsxs(e.Fragment,{children:[e.jsx(p.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(P,{className:"w-4 h-4 mr-2"})}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})})]})})}function Xe({user:a,onUpdate:n}){const[t,o]=x.useState(!1),[l,s]=x.useState(!1),[r,i]=x.useState({phone:a?.phone||"",secondary_email:a?.secondary_email||""}),d=async()=>{s(!0);try{await User.updateMyUserData({phone:r.phone,secondary_email:r.secondary_email}),n(),o(!1)}catch(m){console.error("Error updating contact info:",m),alert("Failed to update contact information. Please try again.")}s(!1)},u=()=>{i({phone:a?.phone||"",secondary_email:a?.secondary_email||""}),o(!1)};return e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:e.jsxs(_,{className:"border-none shadow-md hover:shadow-lg transition-shadow",children:[e.jsx(q,{className:"border-b bg-gradient-to-r from-gray-50 to-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(z,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Q,{className:"w-5 h-5 text-indigo-600"}),"Contact Information"]}),!t&&e.jsxs(N,{variant:"outline",size:"sm",onClick:()=>o(!0),className:"gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Edit"]})]})}),e.jsx($,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"Primary Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(j,{value:a?.email||"",disabled:!0,className:"bg-gray-50 pl-10"})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Your primary email cannot be changed"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(j,{value:r.phone,onChange:m=>i({...r,phone:m.target.value}),disabled:!t,className:t?"pl-10":"bg-gray-50 pl-10",placeholder:"+1 (555) 123-4567",type:"tel"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"Secondary Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(j,{value:r.secondary_email,onChange:m=>i({...r,secondary_email:m.target.value}),disabled:!t,className:t?"pl-10":"bg-gray-50 pl-10",placeholder:"alternate@email.com",type:"email"})]})]}),t&&e.jsxs(p.div,{className:"flex justify-end gap-3 pt-4 border-t",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs(N,{variant:"outline",onClick:u,disabled:l,children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsx(N,{onClick:d,disabled:l,className:"bg-indigo-600 hover:bg-indigo-700",children:l?e.jsxs(e.Fragment,{children:[e.jsx(p.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(P,{className:"w-4 h-4 mr-2"})}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})})]})})}function Oe(){const[a,n]=x.useState({current:!1,new:!1,confirm:!1}),[t,o]=x.useState({current:"",new:"",confirm:""}),[l,s]=x.useState(!1),[r,i]=x.useState(null),d=c=>c.length<8?"Password must be at least 8 characters":/[A-Z]/.test(c)?/[a-z]/.test(c)?/[0-9]/.test(c)?null:"Password must contain a number":"Password must contain a lowercase letter":"Password must contain an uppercase letter",u=async()=>{if(!t.current||!t.new||!t.confirm){i({type:"error",text:"Please fill in all fields"});return}if(t.new!==t.confirm){i({type:"error",text:"New passwords do not match"});return}const c=d(t.new);if(c){i({type:"error",text:c});return}s(!0),setTimeout(()=>{i({type:"success",text:"Password changed successfully!"}),o({current:"",new:"",confirm:""}),s(!1)},1500)},m=c=>{n(g=>({...g,[c]:!g[c]}))},f=(c=>{if(!c)return{strength:0,label:"",color:""};let g=0;return c.length>=8&&g++,c.length>=12&&g++,/[A-Z]/.test(c)&&g++,/[a-z]/.test(c)&&g++,/[0-9]/.test(c)&&g++,/[^A-Za-z0-9]/.test(c)&&g++,g<=2?{strength:33,label:"Weak",color:"bg-red-500"}:g<=4?{strength:66,label:"Medium",color:"bg-yellow-500"}:{strength:100,label:"Strong",color:"bg-green-500"}})(t.new);return e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:e.jsxs(_,{className:"border-none shadow-md hover:shadow-lg transition-shadow",children:[e.jsx(q,{className:"border-b bg-gradient-to-r from-gray-50 to-white",children:e.jsxs(z,{className:"flex items-center gap-2 text-xl",children:[e.jsx(Se,{className:"w-5 h-5 text-indigo-600"}),"Security Settings"]})}),e.jsx($,{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx(me,{children:r&&e.jsx(p.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:e.jsxs(ce,{variant:r.type==="error"?"destructive":"default",className:r.type==="success"?"bg-green-50 border-green-200":"",children:[r.type==="error"?e.jsx(he,{className:"h-4 w-4"}):e.jsx(fe,{className:"h-4 w-4 text-green-600"}),e.jsx(de,{className:r.type==="success"?"text-green-800":"",children:r.text})]})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(j,{type:a.current?"text":"password",value:t.current,onChange:c=>o({...t,current:c.target.value}),className:"pl-10 pr-10",placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>m("current"),className:"absolute right-3 top-3 text-gray-400 hover: text-muted-foreground",children:a.current?e.jsx(A,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(j,{type:a.new?"text":"password",value:t.new,onChange:c=>{o({...t,new:c.target.value}),i(null)},className:"pl-10 pr-10",placeholder:"Enter new password"}),e.jsx("button",{type:"button",onClick:()=>m("new"),className:"absolute right-3 top-3 text-gray-400 hover: text-muted-foreground",children:a.new?e.jsx(A,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]}),t.new&&e.jsxs(p.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx(p.div,{className:`h-full ${f.color}`,initial:{width:0},animate:{width:`${f.strength}%`},transition:{duration:.3}})}),e.jsx("span",{className:"text-sm font-medium  text-muted-foreground",children:f.label})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Password must be at least 8 characters with uppercase, lowercase, and numbers"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{className:"text-gray-700 font-medium",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx(j,{type:a.confirm?"text":"password",value:t.confirm,onChange:c=>{o({...t,confirm:c.target.value}),i(null)},className:"pl-10 pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>m("confirm"),className:"absolute right-3 top-3 text-gray-400 hover: text-muted-foreground",children:a.confirm?e.jsx(A,{className:"w-4 h-4"}):e.jsx(I,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(N,{onClick:u,disabled:l,className:"bg-indigo-600 hover:bg-indigo-700 gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx(p.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(S,{className:"w-4 h-4"})}),"Changing Password..."]}):e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-4 h-4"}),"Change Password"]})})})]})})]})})}function ba(){const{isLoading:a}=Ve();return a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:e.jsx(p.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(T,{className:"w-12 h-12 text-indigo-600"})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8 md:py-12",children:[e.jsxs(p.div,{className:"mb-8",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:[e.jsx("div",{className:"flex items-center gap-3 mb-2",children:e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-card-foreground",children:"Account Settings"})}),e.jsx("p",{className:" text-muted-foreground",children:"Manage your profile, contact information, and security preferences"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Ze,{}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsx(Je,{}),e.jsx(Xe,{})]}),e.jsx(Oe,{})]})]})})}export{ba as default};
